[build]
  base = "client"
  command = "npm install && npm run build && npm install --prefix ../netlify/functions"
  publish = "build"
  functions = "../netlify/functions"

# ðŸ”¹ Shopify Cart Proxy: Keeps rikakuma.ca/cart in the address bar while showing Shopify's cart
[[redirects]]
  from = "/cart"
  to = "https://vd871k-pc.myshopify.com/cart"
  status = 200
  force = true
  headers = {X-Forwarded-Host = "rikakuma.ca"}

# ðŸ”¹ API Routes for Netlify Serverless Functions
[[redirects]]
  from = "/api/cart"
  to = "/.netlify/functions/shopifyCart"
  status = 200
  force = true

[[redirects]]
  from = "/api/add-to-cart"
  to = "/.netlify/functions/addToCart"
  status = 200
  force = true

[[redirects]]
  from = "/api/remove-from-cart"
  to = "/.netlify/functions/cartRemove"
  status = 200
  force = true

# ðŸ”¹ Catch-all redirect for React app, must be LAST
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200